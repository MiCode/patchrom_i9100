diff a/framework.jar.out/smali/com/android/internal/app/ResolverActivity.smali b/framework.jar.out/smali/com/android/internal/app/ResolverActivity.smali	(rejected hunks)
@@ -400,7 +404,7 @@
 
     .prologue
     .local p5, rList:Ljava/util/List;,"Ljava/util/List<Landroid/content/pm/ResolveInfo;>;"
-    const v2, 0x103031a
+    const v2, 0x60d003e
 
     move-object/from16 v0, p0
 
@@ -442,13 +446,7 @@
 
     iput-boolean v0, v1, Lcom/android/internal/app/ResolverActivity;->mAlwaysUseOption:Z
 
-    invoke-virtual/range {p0 .. p0}, Lcom/android/internal/app/ResolverActivity;->getResources()Landroid/content/res/Resources;
-
-    move-result-object v2
-
-    const v3, 0x10e0034
-
-    invoke-virtual {v2, v3}, Landroid/content/res/Resources;->getInteger(I)I
+    invoke-static/range {p0 .. p0}, Lcom/android/internal/app/ResolverActivity$Injector;->getMaxColumns(Lcom/android/internal/app/ResolverActivity;)I
 
     move-result v2
 
@@ -506,7 +504,7 @@
 
     if-lt v2, v3, :cond_3
 
-    const v2, 0x103031a
+    const v2, 0x60d003e
 
     move-object/from16 v0, p0
 
@@ -651,7 +654,7 @@
     goto/16 :goto_1
 
     :cond_3
-    const v2, 0x1030319
+    const v2, 0x60d003e
 
     move-object/from16 v0, p0
 
@@ -788,6 +791,12 @@
 
     if-eqz p6, :cond_7
 
+    invoke-static/range {p0 .. p0}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v1
+
+    if-nez v1, :cond_7
+
     const v2, 0x1020294
 
     move-object/from16 v0, p0
